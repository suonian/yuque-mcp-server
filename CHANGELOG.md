# 更新日志

所有重要的项目变更都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [1.1.0] - 2025-11-20

### ✨ 新增功能

- **增强文档查询功能**
  - `get_doc` 工具现在自动获取并显示知识库归属信息
  - 文档返回包含完整的元数据（创建者、阅读数、点赞数、评论数等）
  - 显示完整的访问路径和使用方法

- **改进搜索结果展示**
  - 修复搜索API数据结构解析问题，正确提取 namespace 和 slug
  - 搜索结果中直接显示完整路径和使用方法
  - 显示文档统计信息（阅读数、点赞数）
  - 处理信息缺失情况，提供友好的提示和替代方案

- **新增 `get_doc_by_id` 工具**
  - 提供友好的错误提示和使用建议
  - 明确说明语雀API的限制

### 🔧 改进

- **错误处理增强**
  - 实现标准化的 MCP 错误码扩展（-32001 到 -32009）
  - 根据HTTP状态码返回明确的错误码和解决建议
  - 增强日志记录，包含详细的调试信息

- **文档内容获取优化**
  - 添加内容完整性检测（完整内容/仅预览）
  - 当权限不足时提供明确的提示和解决建议
  - 显示内容长度信息

### 🐛 修复

- **修复搜索功能数据结构解析**
  - 修复从语雀搜索API返回数据中提取 namespace 和 slug 的问题
  - 正确解析 `target` 字段中的文档和知识库信息

- **修复搜索结果展示**
  - 修复知识库信息显示为"未知"的问题
  - 修复无法获取完整路径的问题

### 📚 文档

- 新增 `ENHANCEMENT_SUMMARY.md` - 功能增强总结
- 新增 `ISSUE_ANALYSIS.md` - 问题分析文档
- 新增 `SOLUTION_SUMMARY.md` - 解决方案总结
- 更新 `README.md` - 添加最新功能说明

---

## [1.0.0] - 2025-11-19

### 🎉 首次发布

- 完整的 MCP 协议实现（2024-11-05）
- 支持 29+ 个语雀 API 工具
- Docker 部署支持
- 跨平台支持（macOS/Linux/Windows）
- 完整的文档和测试脚本

### ✨ 核心功能

- 用户管理：获取用户信息
- 知识库管理：完整的 CRUD 操作
- 文档管理：完整的 CRUD 操作、版本历史
- 搜索功能：全文搜索
- 团队管理：团队信息、成员管理、统计功能

### 🔐 安全特性

- 支持 HTTP Header 和环境变量配置 Token
- 配置文件已添加到 `.gitignore`
- 无硬编码敏感信息

### 📦 部署支持

- Docker 一键部署
- 跨平台启动脚本（macOS/Linux/Windows）
- 系统服务自动启动（macOS launchd）
- 自动化测试脚本

---

## [未发布]

### 计划功能

- [ ] 支持更多语雀 API 功能
- [ ] 添加 Webhook 支持
- [ ] 实现缓存机制
- [ ] 性能优化
- [ ] 更多客户端兼容性测试
- [ ] CI/CD 自动化

---

**注意**: 版本号格式为 `主版本号.次版本号.修订号`

- **主版本号**: 不兼容的 API 修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

